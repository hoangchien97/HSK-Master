generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Category {
  id          String   @id @default(uuid())
  name        String
  slug        String   @unique
  description String?
  createdAt   DateTime @default(now())
  courses     Course[]
}

model Course {
  id               String         @id @default(uuid())
  title            String
  slug             String         @unique
  description      String?
  image            String?
  instructor       String?
  instructorAvatar String?
  price            String?
  originalPrice    String?
  students         String?
  rating           String?
  level            String?
  tag              String?
  badgeText        String?
  badgeColor       String?
  vocabularyCount  Int            @default(0)
  grammarCount     Int            @default(0)
  lessonCount      Int            @default(0)
  durationHours    Int            @default(0)
  lectures         Int            @default(0)
  createdAt        DateTime       @default(now())
  categoryId       String
  isPublished      Boolean        @default(true)
  isFeatured       Boolean        @default(false)
  category         Category       @relation(fields: [categoryId], references: [id])
  lessons          Lesson[]
  grammarPoints    GrammarPoint[]
  registrations    Registration[]
}

model Lesson {
  id           String       @id @default(uuid())
  courseId     String
  title        String
  titleChinese String?
  description  String?
  order        Int
  isLocked     Boolean      @default(true)
  progress     Int          @default(0)
  createdAt    DateTime     @default(now())
  course       Course       @relation(fields: [courseId], references: [id])
  vocabularies Vocabulary[]
}

model Vocabulary {
  id        String   @id @default(uuid())
  lessonId  String
  word      String
  pinyin    String?
  meaning   String
  audioUrl  String?
  createdAt DateTime @default(now())
  lesson    Lesson   @relation(fields: [lessonId], references: [id])
}

model Registration {
  id        String   @id @default(uuid())
  name      String
  phone     String
  email     String?
  note      String?
  createdAt DateTime @default(now())
  courseId  String?
  course    Course?  @relation(fields: [courseId], references: [id])
}

// Hero Slideshow
model HeroSlide {
  id               String   @id @default(uuid())
  image            String
  badge            String
  badgeColor       String
  title            String
  description      String
  primaryCtaText   String
  primaryCtaHref   String
  secondaryCtaText String?
  secondaryCtaHref String?
  overlayGradient  String
  order            Int
  isActive         Boolean  @default(true)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
}

// HSK Levels
model HSKLevel {
  id              String   @id @default(uuid())
  level           Int      @unique
  title           String
  badge           String
  badgeColor      String
  description     String
  vocabularyCount String
  targetAudience  String
  targetIcon      String
  accentColor     String
  bgGradient      String
  href            String
  order           Int
  isActive        Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

// Why Choose Us Features
model Feature {
  id          String   @id @default(uuid())
  icon        String
  iconBg      String
  iconColor   String
  title       String
  description String
  order       Int
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// CTA Section Stats
model CtaStat {
  id          String   @id @default(uuid())
  value       Int
  suffix      String?
  label       String
  order       Int
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// Photo Albums
model Album {
  id          String   @id @default(uuid())
  title       String
  description String?
  thumbnail   String
  photoCount  Int      @default(0)
  order       Int
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  photos      Photo[]
}

model Photo {
  id          String   @id @default(uuid())
  albumId     String
  url         String
  title       String?
  description String?
  order       Int
  createdAt   DateTime @default(now())
  album       Album    @relation(fields: [albumId], references: [id], onDelete: Cascade)
}

// Grammar Points for Courses
model GrammarPoint {
  id          String   @id @default(uuid())
  courseId    String
  title       String
  titleChinese String?
  description String?
  order       Int
  createdAt   DateTime @default(now())
  course      Course   @relation(fields: [courseId], references: [id], onDelete: Cascade)
}

// Student Reviews
model Review {
  id          String   @id @default(uuid())
  studentName String
  className   String   // HSK 1, HSK 2, etc.
  content     String
  rating      Int      // 1-5 stars
  isApproved  Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
